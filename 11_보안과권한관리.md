## 보안과 권한 관리

### 데이터베이스 보안
- 물리적 환경에 대한 보안 : 자연 재해 등으로부터 보호
- 권한 관리를 통한 보안 : 권한이 없는 사용자로부터 보호
- 운영 관리를 통한 보안 : 권한이 있는 사용자로부터 보호(권한이 있는 사용자라 하더라도, 실수 등의 이유로 데이터 무결성을 위반할 수 있다. 그러므로 데이터 무결성을 유지하기 위한 올바른 제약조건을 설정하고, 사용자들이 정의된 제약 조건을 위반하지 않도록 통제해야 한다.)


### 권한 관리
GRANT : 객체의 소유자가 다른 사용자에게 객체에 대한 사용 권한을 부여하기 위해 필요한 SQL 명령어 
```sql
GRANT 권한 ON 객체 TO 사용자 [WITH GRANT OPTION]
```
GRANT 명령어로 부여 받은 권한은 기본적으로 다른 사용자에게 부여할 수 없다. 하지만, WITH GRANT OPTION을 포함하면 권한을 부여받은 사용자가 자신이 부여받은 권한을 다른 사용자에게도 부여할 수 있다.

REVOKE : GRANT명령어를 통해 다른 사용자에게 권한을 부여한 사용자가 자신이 부여한 권한을 취소할 때 사용하는 명령어

```sql
REVOKE 권한 ON 객체 FROM 사용자 CASCADE| RESTRICT;
```


#### 연습문제

#### 1. 다음 설명의 A와 B의 내용이 올바르게 짝지어진 것은?
A - 보안 B  - 무결성
```
A는 권한이 없는 사용자가 데이터베이스에 접근할 수 없도록 보호하는 것이고, B는 데이터베이스의 정확성을 유지하기 위해 권한이 있는 사용자로부터 데이터베이스를 보호하는 것이다.
```

#### 7. Hong이 제품이라는 테이블을 생성하고 "GRANT SELECT ON 제품 TO Kim WITH GRANT OPTION"을 실행하였다. 다음 중 옳지 않은 것은?
(1) 제품 테이블의 기본키를 외래키로 참조하는 테이블을 만들기 위해서는 REFERENCES 권한도 부여받아야 한다.
```
(1) Kim은 제품 테이블의 기본키를 외래키로 참조하는 배송 테이블을 생성할 수 있다.
(2) Kim은 제품 테이블에 대한 검색용 뷰를 생성할 수 있다.
(3) Hong은 추가로 "GRANT UPDATE ON 제품 TO Kim"을 실행할 수 있다.
(4) Kim은 "GRANT SELECT ON 제품 TO Park"을 실행할 수 있다.
```

#### 9. 역할을 사용하면 얻게되는 장점
권한 부여의 단순화, 즉 사용자에게 부여하고 싶은 여러가지 권한들을 미리 역할에 담아서 필요할 때 역할을 통해 부여할 수 있다. 추후에 수정, 삭제시에도 관리가 용이하다. 역할을 수정한다면 변경 내용 그대로 그 역할을 부여받은 사용자에게도 반영이된다.

#### 11. 모든 사용자에게 주문 테이블에 대한 검색,수정,삽입 연산의 권한을 부여하는 SQL문
```sql
GRANT SELECT, UPDATE, INSERT ON 주문 TO PUBLIC;
```

#### 12. 사용자 Kim의 사원 테이블에 대한 검색 권한을 취소하면서 사용자 Kim이 다른 사용자에게 부여한 권한도 함께 취소하는 SQL문을 작성
```sql
REVOKE SELECT ON 사원 TO Kim CASCADE;
```

#### 13. emp_role이라는 이름의 역할을 생성하는 SQL문
```sql
CREATE ROLE emp_role;
```

#### 14. emp_role이라는 이름의 역할을 사용자 Kim에게 부여하는 SQL문
```sql
GRANT emp_role TO Kim;
```

### 15. emp_role이라는 이름의 역할을 제거하는 SQL문
```sql
DROP ROLE emp_role;
```